Israeli troops battled Hamas militants on Wednesday near a southern Gaza Strip town in fighting that has so far killed more than 680 Palestinians and 34 Israelis.

The top U.S. diplomat, Secretary of State John Kerry, reported progress in efforts to end fighting.

Neither side, however, appeared to be backing down.

Palestinian rocket fire led several international airlines to cancel flights to Tel Aviv on Tuesday.

Israeli troops clashed with Hamas near the Gaza town of Khan Younis in heavy fighting that forced dozens of families to flee.

Hamas leader Khaled Mashaal later demanded Gaza's borders be open and an end to the blockade against it.

He called Palestinians "the true owners of the land."

Hamas has ruled Gaza since 2007.

The Palestinians are seeking their own country.

They and the Israelis have been negotiating — and fighting — over the land for decades.

Israel insists it must limit the military strength of the Islamic militant group Hamas.

Israel's position appears to have gained support within the U.S. administration.

The U.S. Federal Aviation Administration banned flights into Israel Tuesday following a Hamas rocket that hit near the airport the day before.

Despite the ban, Secretary of State Kerry flew into Tel Aviv Wednesday, reflecting his determination to achieve a cease-fire.

He met with Israeli Prime Minister Benjamin Netanyahu.

Earlier, he had talks with Palestinian President Mahmoud Abbas and U.N. Secretary-General Ban Ki-moon, who is also in the region.

U.S. officials don't expect an immediate, lasting truce, however.

In Jerusalem, Kerry said negotiations toward a Gaza cease-fire were making some progress.

"We certainly have made steps forward," Kerry said.

"There's still work to be done."

On the ground, meanwhile, Israeli troops clashed with Hamas fighters on the outskirts of Khan Younis.

The Israelis were backed by tanks and aerial drones, and the Palestinians were armed with rocket-propelled grenades and assault rifles.

At least eight militants died, a Palestinian health official said.

The Palestinian Red Crescent, which is part of the International Red Cross, was trying to evacuate some 250 people from the area.

Since early Wednesday Khan Younis has been pummeled by air strikes and tank shelling.

Hundreds of residents of eastern Khan Younis were seen fleeing their homes as the battle unfolded, flooding into the streets with any belongings they could carry.

They said they were seeking shelter in nearby U.N. schools.

"The airplanes and airstrikes are all around us," said Aziza Msabah, a resident of Khan Younis.

"They are hitting the houses, which are collapsing upon us."

Farther north, the Shijaiyah neighborhood of Gaza City saw intense fighting earlier this week.

An airstrike demolished a home, killing 30-year-old journalist Abdul Rahman Abu Hean and his grandfather and nephew.

Israel also struck the Wafa hospital in Gaza City, which the military says houses a Hamas command center.

Basman Ashi, the medical center's director, said all 97 patients and staff were evacuated following Israeli warnings.

No one was hurt in the attack.

Meanwhile, a foreign worker in Israel was killed when a rocket fired from the Gaza Strip landed in southern Israel on Wednesday, police said.

The worker's nationality was unknown.

Israel said five more of its soldiers have died in the conflict, bringing the military's death toll to 32.

Two Israeli civilians have been killed in 15 days of fighting.

In Jerusalem, 30,000 people attended the funeral of Max Steinberg, a 24-year-old from Southern California serving in the Israeli military.

Steinberg was killed in an attack on an armored personnel carrier on Sunday.

"I spoke with him a day and a half ago," his mother, Evie Steinberg, told Israeli TV.

"I said 'are you afraid?'

He said 'no.

I am afraid only for you.'

He's a hero."

The Palestinians say Israel is randomly using modern weaponry against Gaza's 1.7 million people.

They charge Israel with inflicting a heavy civilian death toll and leveling entire buildings.

The Palestinian death toll stands at 684, mostly civilians, according to Gaza health official Ashraf al-Kidra.

Israel says it launched the Gaza operation to stop Hamas rocket fire into Israel.

More than 2,100 rockets have been fired since the conflict erupted.

Another goal is to destroy a network of cross-border tunnels, some of which have been used to stage attacks.

U.N. High Commissioner for Human Rights Navi Pillay, meanwhile, warned both sides against targeting civilians and said war crimes may have been committed.

She noted an Israeli drone strike that killed three children and wounded two others while they were playing on the roof of their home.

She also referenced Israeli fire that struck seven children playing on Gaza beach, killing four from the same family.

"These are just a few examples where there seems to be a strong possibility that international humanitarian law has been violated, in a manner that could amount to war crimes," Pillay told the 47-nation U.N. Human Rights Council.

She said such incidents should be investigated.

On Tuesday, U.S. and European airlines canceled flights to Israel after a Hamas rocket hit near the Ben Gurion International Airport in Tel Aviv.

Israeli officials have criticized the cancellations as an overreaction that rewards Hamas.

Israel's own El Al airline is still flying in and out of Ben Gurion.

Hamas spokesman Fawzi Barhoum said the flight cancellations were a "great victory" for the group.

