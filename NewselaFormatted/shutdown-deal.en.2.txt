Congress passed legislation Wednesday to narrowly avoid a threatened default, a crisis where the country would not have been able to borrow more money to pay its bills.

The legislation at the same time ended a 16-day partial government shutdown.

The agreement came just one day before the point when Treasury Secretary Jacob Lew said the United States would reach the current $16.7 trillion debt limit and could no longer borrow.

The Senate approved the legislation in a bipartisan 81-18 vote.

The House followed with a 285-144 vote, sending it to be signed by President Barack Obama.

The battle ended along the strict terms set by Obama when the twin crises began.

"We fought the good fight.

We just didn't win," conceded House Speaker John Boehner as lawmakers lined up to vote on the bill.

The legislation includes nothing for Republicans demanding to get rid of or scale back Obama's signature health care overhaul.

The legislation would permit the Treasury to borrow normally through Feb. 7 or perhaps a month longer.

It would also fund the government through Jan. 15.

More than two million federal workers would be paid under the agreement.

The nation "came to the brink of disaster" before sealing an agreement, Senate Majority Leader Harry Reid said.

The measure had support from the White House, most if not all Democrats in Congress and many Republicans fearful of how a default would hurt the economy.

"We'll begin reopening our government immediately and we can begin to lift this cloud of uncertainty from our businesses and the American people," Obama said after the Senate vote.

Tea party-aligned lawmakers who triggered the shutdown that began on Oct. 1 said they would vote against the legislation.

Significantly, though, Texas Sen. Ted Cruz and others agreed not to use the Senate's 18th-century rules to slow the bill's progress.

In remarks on the Senate floor, Cruz said the measure was "a terrible deal."

He criticized fellow Republicans for lining up behind it.

Senate Republican Leader Mitch McConnell negotiated the deal with Reid.

He emphasized that it preserved a round of spending cuts negotiated two years ago with Obama and Democrats.

Polls showed that the shutdown and brush with default have sent Republicans' public approval plummeting.

The party has been badly split nationally as well as in McConnell's home state of Kentucky.

"When the stakes are highest Mitch McConnell can always be counted on to sell out conservatives," said Matt Bevin.

He is challenging the party leader from the right in a 2014 election primary.

More broadly, national tea party groups and their allies underscored the internal divide.

The Club for Growth urged lawmakers to vote against the congressional measure.

The bill does not significantly change Obamacare or other government programs that cost "trillions" and has no meaningful spending cuts, the group said.

"If this bill passes, Congress will kick the can down the road, yet again," the group added.

The U.S. Chamber of Commerce came out in favor of the bill.

The bill allows the Treasury to resume borrowing.

It also had funding for the government to reopen.

That was about it.

House and Senate negotiators are to meet this fall.

They will see if progress is possible on a broad compromise to reduce the amount the government owes.

Other issues fell by the wayside in a final deal.

The struggle has occupied essentially all of Congress' time for the past three weeks.

The shutdown began on Oct. 1 after Cruz and his tea party allies in the House demanded the defunding of the health care law as a trade for providing essential government funding.

Obama and Reid refused.

Then they refused again and again as Boehner gradually scaled back Republican demands.

The shutdown initially idled about 800,000 workers.

That soon fell to about 350,000 after Congress agreed to let furloughed Pentagon employees return to work.

There was widespread inconvenience.

But the mail was delivered, Medicare continued to pay doctors who treated seniors and there was no interruption in Social Security benefits.

Still, national parks were closed.

Also, government research scientists were sent home and Food and Drug Administration inspectors only worked occasionally.

As Republican polls sank, Boehner refused to let the House vote on legislation to reopen the entire government.

He insisted on a piecemeal approach that the White House and Reid rejected as insufficient.

As the Oct. 17 debt-limit deadline approached, there were warnings from European officials as well as Cabinet members and bankers in this country that failure to raise the debt limit invited an economic disaster far worse than the near-meltdown of 2008.

On Tuesday, the Fitch credit rating agency said it was reviewing its AAA rating on U.S. government debt for possible downgrade.

